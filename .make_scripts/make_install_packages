#!/usr/bin/env sh
# vim: ft=sh

PACKAGES=(
    "acpi"
    "alsa-tools"
    "alsa-utils"
    "arandr"
    "bind-tools"
    "compton"
    "diff-so-fancy"
    "dunst"
    "feh"
    "firefox"
    "fzf"
    "ghostscript"
    "gimp"
    "gnome-keyring"
    "gsimplecal"
    "gtk2"
    "gtk3"
    "htop"
    "imagemagick"
    "keybase"
    "keybase-gui"
    "mpv"
    "neomutt"
    "neovim"
    "ntfs-3g"
    "openssh"
    "p7zip"
    "pacman-contrib"
    "pass"
    "pass-otp"
    "pavucontrol"
    "perl-file-mimeinfo"
    "playerctl"
    "ponymix"
    "pulseaudio"
    "pulseaudio-alsa"
    "python"
    "python-neovim"
    "python-unidecode"
    "python2"
    "python2-neovim"
    "qt4"
    "r"
    "ranger"
    "redshift"
    "reflector"
    "rustup"
    "scrot"
    "texlive-most"
    "tmux"
    "vlc"
    "w3m"
    "zathura"
    "zathura-pdf-poppler"
)

AURPACKAGES=(
    "checkupdates+aur"
    "gitflow-avh"
    "gitflow-zshcompletion-avh"
    "gtk-theme-united-gnome"
    "jabref"
    "jdk"
    "nerd-fonts-complete"
    "polybar"
    "rofi-pass"
    "spotify"
    "standardnotes-desktop"
    "teamviewer"
    "wpa-cute"
)

echo -e "\nInstalling packages from official repo..."
for PACK in ${PACKAGES[@]} ; do
    if pacman -Q $PACK > /dev/null ; then
        echo "Package already installed: '$PACK'"
    else
        echo "Installing package: '$PACK'..."
        echo |  sudo pacman -S $PACK --needed
        echo "Package successfully installed: '$PACK'"
    fi
done

echo -e "\nInstalling packages from AUR"
if pacman -Q yay-bin > /dev/null ; then
    echo "AUR Helper 'yay' already installed"
else
    echo "Installing AUR helper 'yay'..."
    dir=$(pwd)
    cd $(mktemp -d)
    git clone https://aur.archlinux.org/yay-bin.git
    cd yay-bin
    makepkg -si
    cd ..
    rm -rf yay-bin
    cd $dir
    echo "AUR Helper 'yay' successfully installed"
fi

for PACK in ${AURPACKAGES[@]}; do
    if pacman -Qs $PACK > /dev/null ; then
        echo "Package already installed: '$PACK'"
    else
        echo "Installing package: '$PACK'..."
        yay -S $PACK --needed
        echo "Package successfully installed: '$PACK'"
    fi
done

echo "Start keybase on login"
systemctl --user enable keybase.service
echo "Start dunst on login"
systemctl --user enable dunst.service
echo "Enable acpi"
sudo systemctl enable acpid.service
